---
tags:
  - 智能体
data: 2025-12-24
origin:
---
---
# 变量
- 分类：系统变量和用户变量
- 性质：
	- 用户变量名唯一性
	- 不可与系统变量相同
	- 只支持string类型
- 应用场景
	- 变量创建后，LLM 会自动从用户对话中提取匹配内容并保存。
	- 若在 Prompt 中启用，可直接引用，如：你好，{{name}}！

---
# 数据库
- 应用场景：
	- 用于管理结构化数据，用户通过NL和大模型交互，管理和处理数据内容，
	- 适用于客户信息、商品清单、订单记录等场景。
	- 排行榜，知名信息
- 模式分类：
	- 单用户模式和多用户模式（在 **工作流中必须显式处理 `uuid` 字段**；在 Prompt 中可忽略）
- 渠道模式
	- 数据呈现在不同渠道上有所不同，渠道指app和用户之间的桥梁
- “设为索引” = 给这个字段加个“目录”或“书签”，让系统能更快找到你要的数据
	- 索引主要为创建事件，id、uuid、sys_platform、time
- 储存字段 == 表头
#### 渠道模式选择

| 你的需求                                | 推荐模式            |
| ----------------------------------- | --------------- |
| 用户希望“在哪用都看到自己的数据” → 跨 Coze 端一致      | 扣子站内渠道共享，其他渠道隔离 |
| \|用户希望“在 Lark 和 Coze App 里看到的是同一个数据 | 渠道共享            |
| 用户希望“隐私保护，不同平台数据不互通                 | 渠道隔离            |
| 做一个“全平台可见”的留言墙/排行榜                  | 渠道共享            |
| 做一个“仅限公司内部使用”的协作工具                  | 扣子站内渠道共享，其他渠道隔离 |

# 长期记忆
- 运用用户变量和数据库，通过工作流调用可模拟长期记忆
- **必须将信息显式保存**（通过变量赋值或数据库插入），并在 Prompt 或工作流中主动引用（如 {{name}}）
- 记忆库
	- 将对话内容摘要，变成一条条文本笔记
	- ✅ **特点**：
		- 支持**语义搜索**（即使用户没提“咖啡”，但说“提神饮料”，也能找到）；
		- 适合存储**零散、动态、非结构化**的记忆；
		- 比“变量”更灵活，比“数据库”更智能。
- 检索（回复前调用合适记忆）/写入（把新记忆存入）


#### prompt写法
你是一个贴心的助手。请始终记住以下信息：
- 用户的名字是：{{name}}（如果未设置，默认称呼“朋友”）
- 用户偏好的语言是：{{language}}（如“中文”或“English”）
- 注意：
	1. **变量必须启用“Prompt 访问”**  
	    在 Coze 变量设置中，确保勾选 **“在 Prompt 中使用”**，否则 `{{name}}` 会为空。
	2. **默认值处理**  
	    可在 Prompt 中写逻辑，避免空值尴尬：

每次回复时：
1. 用 {{name}} 称呼用户（若 {{name}} 为空，则称“朋友”）；
2. 用 {{language}} 对应回复语言；
3. 如果用户说“我叫...”或“请叫我...”，请更新 name 变量；
4. 如果用户提到新偏好（如“以后用英文”），请更新 language 变量并确认。

当前信息：
- name: {{name}}
- language: {{language}}

# 文件盒子（新版本未上线）
（管理并储存用户已发文件）


# 快捷指令
（输入框上方按钮或者输入执行代码）
- 快捷指令是对话输入框上方的按钮，配置完成后，用户可以快速发起预设对话
- 注意事项
	- 按钮名称简洁明确（如“翻译”“查天气”）；
- 指令内容
	- 实际发送给智能体的完整内容
	- **固定文本** + **变量**（来自组件）->**必须与你的 Prompt 逻辑匹配**
		简单指令：发送最新的3条AI新闻
		带变量指令：将 "{{text}}" 翻译成 {{target_lang}}
- 工具
	- 跳过 LLM 自然语言理解，**直接调用的后端能力**
	- **在指令内容中隐式调用**
		- 不勾选“直接使用”，而是在 **Query content** 中写自然语言请求（如“查北京天气”）；
		- 智能体通过 Prompt 识别后，再去调用插件；适合简单、非结构化场景。
- 组件
	- 快捷指令弹出的**交互表单控件**（小卡片），用于让用户输入或选择参数。
	- 组件类型

| 组件类型            | 说明         | 示例                  |
| --------------- | ---------- | ------------------- |
| 文本输入框（Text）     | 用户自由输入文字   | 翻译原文、搜索关键词          |
| 下拉选择器（Selector） | 用户从预设选项中选择 | 语言（中文/英文）、类型（新闻/论文） |
| 文件上传（Upload）    | 用户上传文件     | PDF、图片、文档           |

| 配置项                                                                  | 说明              | 示例                          |
| -------------------------------------------------------------------- | --------------- | --------------------------- |
| **按钮名称**                                                             | 显示在聊天窗口的按钮文字    | `AI 新闻`                     |
| **指令名称**                                                             | 触发命令（仅支持字母和下拉线） | `ai_news`                   |
| **指令描述**                                                             | 说明该快捷指令的用途      | “获取最新的3条AI行业新闻”             |
| 发布渠道                                                                 | 是否显示快捷按钮        | 如何触发指令                      |
| ✅ **Coze Agent Store、Discord、Telegram**                              | 是（显示按钮）         | 点击按钮 **或** 输入 `/指令名`        |
| ❌ **Cici、Lark（飞书）、Slack、WhatsApp、LINE、Messenger、LarkBase、Instagram** | 否（不显示按钮）        | **必须手动输入命令**，如 `/translate` |

# 疑问
- **键值对**
	- key_name->bady